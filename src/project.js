System.register("chunks:///game/audio-manager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e){"use strict";var i,t,o,n,a,r,l,u,c,s,p,h,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inherits,o=e.classCallCheck,n=e.possibleConstructorReturn,a=e.getPrototypeOf,r=e.initializerDefineProperty,l=e.assertThisInitialized,u=e.createClass},function(e){c=e.cclegacy,s=e._decorator,p=e.AudioClip,h=e.AudioSourceComponent,d=e.Component}],execute:function(){var f,g,y,m,C,v,b;c._RF.push({},"52ff6Qg0MlJaaUpLNS1HPTJ","audio-manager",void 0);var k=s.ccclass,A=s.property;e("AudioManager",(f=k("AudioManager"),g=A(p),y=A(p),f((v=i((C=function(e){function i(){var e,t;o(this,i);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return t=n(this,(e=a(i)).call.apply(e,[this].concat(c))),r(t,"bg",v,l(t)),r(t,"click",b,l(t)),t.audioComp=null,t}return t(i,e),u(i,[{key:"start",value:function(){this.audioComp=this.getComponent(h)}},{key:"playSound",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(this.audioComp.clip=this.bg,this.audioComp.play()):this.audioComp.stop()}},{key:"playClip",value:function(){this.audioComp.playOneShot(this.click)}}]),i}(d)).prototype,"bg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(C.prototype,"click",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=C))||m));c._RF.pop()}}}));

System.register("chunks:///data/constants.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(_){"use strict";var A,R,E;return{setters:[function(_){A=_.classCallCheck},function(_){R=_.cclegacy,E=_.Vec3}],execute:function(){var S,P,O,I;R._RF.push({},"d9bbf8RNxZP/qHAzCKjmpIn","constants",void 0),function(_){_[_.NORMAL=0]="NORMAL",_[_.SPRING=1]="SPRING",_[_.DROP=2]="DROP",_[_.GIANT=3]="GIANT",_[_.SPRINT=4]="SPRINT"}(S||(S={})),function(_){_[_.READY=1]="READY",_[_.PLAYING=2]="PLAYING",_[_.PAUSE=3]="PAUSE",_[_.OVER=4]="OVER"}(P||(P={})),function(_){_.RESTART="restart",_.REVIVE="revive",_.ADDSCORE="add-score",_.DYING="dying",_.HIDETIPS="hide-tips"}(O||(O={})),function(_){_[_.JUMPUP=1]="JUMPUP",_[_.FALLDOWN=2]="FALLDOWN",_[_.SPRINT=3]="SPRINT"}(I||(I={}));var N=_("Constants",(function _(){A(this,_)}));N.COEFF_POS_BALL=8/360,N.PLAYER_MAX_DOWN_FRAMES=40,N.MAX_SCORE=0,N.SCORE_BOARD_CENTER=2,N.SCORE_BOARD_NOT_CENTER=1,N.BOARD_INIT_POS=new E(0,10,0),N.BOARD_NUM=6,N.BOARD_NEW_INDEX=2,N.BOARD_HEIGTH=.25,N.BOARD_RADIUS=1.5,N.BOARD_HEIGTH_SCALE_DROP=.5,N.BOARD_RADIUS_SCALE_GIANT=2.8,N.BOARD_GAP=4.3,N.BOARD_GAP_SPRING=9,N.BOARD_GAP_SPRINT=192,N.BOARD_SCALE_GIANT=2.8,N.SCENE_MAX_OFFSET_X=3.5,N.BOARD_TYPE=S,N.BOARD_DROP_FRAMES=40,N.BOARD_DROP_STEP=.5,N.BOARD_RADIUS_CENTER=.35,N.BOARD_SPRING_FRAMES=10,N.BOARD_WAVE_FRAMES=16,N.BOARD_WAVE_INNER_START_FRAMES=8,N.BOARD_WAVE_INNER_STEP=.24,N.BOARD_WAVE_STEP=2.25,N.BOARD_MOVING_STEP=.03,N.SPRING_HEIGHT=.2,N.SPRING_HELIX_STEP=.5,N.SPRING_HELIX_STEP_SPIRNT=1.2,N.SPRING_TOP_STEP=.25,N.SPRING_TOP_STEP_SPRINT=.5,N.WAVE_OFFSET_Y=.065,N.CAMERA_INIT_POS=new E(0,15,22),N.CAMERA_INIT_ROT=new E(-11,0,0),N.CAMERA_MOVE_X_FRAMES=20,N.CAMERA_MOVE_Y_FRAMES=15,N.CAMERA_MOVE_Y_FRAMES_SPRING=23,N.CAMERA_MOVE_MINI_ERR=.02,N.CAMERA_OFFSET_Y=10,N.CAMERA_OFFSET_Y_SPRINT=15,N.BOARD_BUMP_FRAMES=10,N.BOARD_BUMP_STEP=[-.15,-.1,-.07,-.02,-.003,.003,.02,.07,.1,.15],N.GAME_STATE=P,N.GAME_EVENT=O,N.BALL_RADIUS=.5,N.BALL_JUMP_STATE=I,N.BALL_JUMP_FRAMES=20,N.BALL_JUMP_FRAMES_SPRING=27,N.BALL_JUMP_FRAMES_SPRINT=240,N.BALL_JUMP_STEP=[.8,.6,.5,.4,.3,.2,.15,.1,.05,.03],N.BALL_JUMP_STEP_SPRING=[1.2,.8,.6,.4,.3,.2,.15,.1,.05],N.BALL_JUMP_STEP_SPRINT=.8,N.BALL_SPRINT_STEP_Y=10,N.DIAMOND_NUM=10,N.DIAMOND_PIECE_NUM=10,N.DIAMOND_RADIUS=.3,N.DIAMOND_ROTATE_STEP_Y=1.5,N.DIAMOND_SCORE=1,N.DIAMOND_SCORE_AREA=.6,N.DIAMOND_SPRINT_SCORE_AREA=1,N.DIAMOND_SPRINT_STEP_Y=4,N.DIAMOND_START_FRAME=6,R._RF.pop()}}}));

System.register("chunks:///utils/utils.js",["cc"],(function(t){"use strict";var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){e._RF.push({},"dddce/2a/tOSLUiRKNMAQVd","utils",void 0);c.ccclass,c.property,t("utils",{getDiffCoeff:function(t,e,c){return(c*t+1)/(1*t+((c+1)/e-1))},getRandomInt:function(t,e){var c=Math.random()*(e-t+1)+t;return Math.floor(c)}});e._RF.pop()}}}));

System.register("chunks:///game/board-manager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../data/constants.js","../utils/utils.js"],(function(t){"use strict";var i,n,e,a,o,r,s,d,u,_,h,c,l,f,p,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,e=t.classCallCheck,a=t.possibleConstructorReturn,o=t.getPrototypeOf,r=t.initializerDefineProperty,s=t.assertThisInitialized,d=t.createClass},function(t){u=t.cclegacy,_=t._decorator,h=t.Vec3,c=t.Prefab,l=t.instantiate,f=t.Component},function(t){p=t.Constants},function(t){m=t.utils}],execute:function(){var D,v,S,P,b,N,A;u._RF.push({},"2a0a0QivvtEZodpOZ79qMFb","board-manager",void 0);var y=_.ccclass,I=_.property,M=new h,O=new h;t("BoardManager",(D=y("BoardManager"),v=I(c),S=I(c),D((N=i((b=function(t){function i(){var t,n;e(this,i);for(var d=arguments.length,u=new Array(d),_=0;_<d;_++)u[_]=arguments[_];return n=a(this,(t=o(i)).call.apply(t,[this].concat(u))),r(n,"boardPrefab",N,s(n)),r(n,"diamondPrefab",A,s(n)),n.diamondSprintList=[],n.diamondCenterX=0,n._boardList=[],n._boardInsIdx=0,n}return n(i,t),d(i,[{key:"start",value:function(){this.initBoard(),this.initDiamond()}},{key:"reset",value:function(){this._boardInsIdx=0;for(var t,i=p.BOARD_INIT_POS.clone(),n=p.BOARD_TYPE.NORMAL,e=0;e<p.BOARD_NUM;e++)(t=this._boardList[e]).reset(n,i,1),i=this.getNextPos(t,1);if((t=this._boardList[0]).isActive=!0,p.game.ball.currBoard=t,this.diamondSprintList[0])for(var a=0;a<p.DIAMOND_NUM;a++)this.diamondSprintList[a].active=!1}},{key:"initBoard",value:function(){for(var t=0;t<p.BOARD_NUM;t++){var i=l(this.boardPrefab);i.name=this._boardInsIdx.toString(),this._boardInsIdx++,this.node.addChild(i);var n=i.getComponent("Board");this._boardList.push(n)}this.reset()}},{key:"newBoard",value:function(t,i){var n=this.getNextPos(this._boardList[p.BOARD_NUM-1],i,M),e=this._boardList[p.BOARD_NUM-1].type,a=this._boardList.shift();t===p.BOARD_TYPE.SPRINT&&(this.diamondCenterX=n.x,this.setDiamond(n)),e===p.BOARD_TYPE.SPRINT?a.reset(t,n,0):a.reset(t,n,i),a.name=this._boardInsIdx.toString(),this._boardInsIdx++,this._boardList.push(a)}},{key:"getNextPos",value:function(t,i,n){var e=n?n.set(t.node.position):t.node.position.clone(),a=m.getDiffCoeff(i,1,2);return e.x=(Math.random()-.5)*p.SCENE_MAX_OFFSET_X*a,t.type===p.BOARD_TYPE.SPRINT&&(e.y+=p.BOARD_GAP_SPRINT,e.x=t.node.position.x),t.type===p.BOARD_TYPE.SPRING?e.y+=p.BOARD_GAP_SPRING:e.y+=p.BOARD_GAP,e}},{key:"initDiamond",value:function(){for(var t=0;t<p.DIAMOND_NUM;t++)this.diamondSprintList[t]=l(this.diamondPrefab),this.node.addChild(this.diamondSprintList[t]),this.diamondSprintList[t].active=!1}},{key:"setDiamond",value:function(t){var i=t.clone();i.y+=p.BALL_JUMP_STEP_SPRINT*p.DIAMOND_START_FRAME;for(var n=0;n<p.DIAMOND_NUM;n++)this.setNextDiamondPos(i),this.diamondSprintList[n].setPosition(i),this.diamondSprintList[n].active=!0}},{key:"newDiamond",value:function(){O.set(this.diamondSprintList[p.DIAMOND_NUM-1].position),this.setNextDiamondPos(O);var t=this.diamondSprintList.shift();t.setPosition(O),t.active=!0,this.diamondSprintList.push(t)}},{key:"clearDiamond",value:function(){for(var t=0;t<p.DIAMOND_NUM;t++)this.diamondSprintList[t].active=!1}},{key:"setNextDiamondPos",value:function(t){t.y+=p.DIAMOND_SPRINT_STEP_Y,t.x+=1.5*(Math.random()-.5),t.x>this.diamondCenterX+p.SCENE_MAX_OFFSET_X?t.x=this.diamondCenterX+p.SCENE_MAX_OFFSET_X:t.x<this.diamondCenterX-p.SCENE_MAX_OFFSET_X&&(t.x=this.diamondCenterX-p.SCENE_MAX_OFFSET_X)}},{key:"getBoardList",value:function(){return this._boardList}},{key:"getDiamondSprintList",value:function(){return this.diamondSprintList}}]),i}(f)).prototype,"boardPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(b.prototype,"diamondPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=b))||P));u._RF.pop()}}}));

System.register("chunks:///utils/pool-manager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,i,a,c;return{setters:[function(t){e=t.createClass,o=t.classCallCheck},function(t){n=t.cclegacy,i=t._decorator,a=t.instantiate,c=t.NodePool}],execute:function(){var s;n._RF.push({},"f92c3xOcsdMEKh7W/84QPrD","pool-manager",void 0);var r=i.ccclass;i.property,t("PoolManager",r("PoolManager")(s=function(){function t(){o(this,t),this.dictPool={},this.dictPrefab={}}return e(t,[{key:"getNode",value:function(t,e){var o=t.data.name;this.dictPrefab[o]=t;var n=null;if(this.dictPool.hasOwnProperty(o)){var i=this.dictPool[o];n=i.size()>0?i.get():a(t)}else{var s=new c;this.dictPool[o]=s,n=a(t)}return n.parent=e,n}},{key:"putNode",value:function(t){var e=t.name,o=null;this.dictPool.hasOwnProperty(e)?o=this.dictPool[e]:(o=new cc.NodePool,this.dictPool[e]=o),o.put(t)}},{key:"clearPool",value:function(t){this.dictPool.hasOwnProperty(t)&&this.dictPool[t].clear()}}],[{key:"instance",get:function(){return this._instance?this._instance:(this._instance=new t,this._instance)}}]),t}())||s);n._RF.pop()}}}));

System.register("chunks:///game/ball.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../data/constants.js","../utils/utils.js","../utils/pool-manager.js"],(function(t){"use strict";var i,e,o,r,s,a,n,h,u,c,P,d,_,p,l,A,m,T,S,B,L;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inherits,o=t.classCallCheck,r=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.initializerDefineProperty,n=t.assertThisInitialized,h=t.createClass},function(t){u=t.cclegacy,c=t._decorator,P=t.Vec3,d=t.Prefab,_=t.Node,p=t.ParticleSystemComponent,l=t.CameraComponent,A=t.LabelComponent,m=t.AnimationComponent,T=t.Component},function(t){S=t.Constants},function(t){B=t.utils},function(t){L=t.PoolManager}],execute:function(){var E,R,f,M,v,g,y,O,N;u._RF.push({},"900c8pQ81tCcrbRdvi9SxTB","ball",void 0);var D=c.ccclass,J=c.property,I=new P;t("Ball",(E=D("Ball"),R=J(d),f=J({type:d}),M=J({type:d}),E((y=i((g=function(t){function i(){var t,e;o(this,i);for(var h=arguments.length,u=new Array(h),c=0;c<h;c++)u[c]=arguments[c];return e=r(this,(t=s(i)).call.apply(t,[this].concat(u))),a(e,"diamondParticlePrefab",y,n(e)),a(e,"scoreAniPrefab",O,n(e)),a(e,"trail02Prefab",N,n(e)),e.currBoard=null,e.boardCount=0,e.jumpState=S.BALL_JUMP_STATE.JUMPUP,e.currBoardIdx=0,e.diffLevel=1,e.currJumpFrame=0,e.hasSprint=!1,e.isTouch=!1,e.touchPosX=0,e.movePosX=0,e.isJumpSpring=!1,e.boardGroupCount=0,e.trailNode=null,e._wpos=new P,e}return e(i,t),h(i,[{key:"start",value:function(){S.game.node.on(_.EventType.TOUCH_START,this.onTouchStart,this),S.game.node.on(_.EventType.TOUCH_END,this.onTouchEnd,this),S.game.node.on(_.EventType.TOUCH_MOVE,this.onTouchMove,this),this.updateBall(),this.reset(),this.trailNode.active=!1}},{key:"onDestroy",value:function(){S.game.node.off(_.EventType.TOUCH_START,this.onTouchStart,this),S.game.node.off(_.EventType.TOUCH_END,this.onTouchEnd,this),S.game.node.off(_.EventType.TOUCH_MOVE,this.onTouchMove,this)}},{key:"update",value:function(t){if(S.game.state===S.GAME_STATE.PLAYING){var i=S.game.boardManager,e=i.getBoardList();if(this.jumpState===S.BALL_JUMP_STATE.SPRINT){this.currJumpFrame>S.BALL_JUMP_FRAMES_SPRINT&&(this.jumpState=S.BALL_JUMP_STATE.JUMPUP,this.isJumpSpring=!1,this.currJumpFrame=0,this.hasSprint=!1,i.clearDiamond()),this.currJumpFrame++;for(var o=i.getDiamondSprintList(),r=0;r<S.DIAMOND_NUM;r++)Math.abs(this.node.position.y-o[r].position.y)<=S.DIAMOND_SPRINT_SCORE_AREA&&Math.abs(this.node.position.x-o[r].position.x)<=S.DIAMOND_SPRINT_SCORE_AREA&&(S.game.addScore(S.DIAMOND_SCORE),this.showScore(S.DIAMOND_SCORE),S.game.ball.playDiamondParticle(this.node.position),o[r].active=!1);this.setPosY(),this.setPosX(),this.touchPosX=this.movePosX;var s=this.node.position.y+S.CAMERA_OFFSET_Y_SPRINT;S.game.cameraCtrl.setOriginPosY(s)}else{for(var a=this.currBoardIdx+1;a>=0;a--){var n=e[a],h=this.node.position,u=e[a].node.position;if(Math.abs(h.x-u.x)<=e[a].getRadius()&&Math.abs(h.y-(u.y+S.BOARD_HEIGTH))<=S.DIAMOND_SCORE_AREA&&e[a].checkDiamond(this.node.position.x),this.jumpState===S.BALL_JUMP_STATE.FALLDOWN){if(this.currJumpFrame>S.PLAYER_MAX_DOWN_FRAMES||this.currBoard.node.position.y-this.node.position.y>S.BOARD_GAP+S.BOARD_HEIGTH){var c=this.trailNode.getComponentInChildren(p);return c.stop(),c.node.active=!1,void S.game.gameDie()}if(this.isOnBoard(n)){this.currBoard=n,this.currBoardIdx=a,this.activeCurrBoard();break}}}this.currJumpFrame++,this.jumpState===S.BALL_JUMP_STATE.JUMPUP&&(this.isJumpSpring&&this.currJumpFrame>=S.BALL_JUMP_FRAMES_SPRING?(this.jumpState=S.BALL_JUMP_STATE.FALLDOWN,this.currJumpFrame=0):!this.isJumpSpring&&this.currJumpFrame>=S.BALL_JUMP_FRAMES&&(this.jumpState=S.BALL_JUMP_STATE.FALLDOWN,this.currJumpFrame=0)),this.setPosY(),this.setPosX(),this.currBoard.type!==S.BOARD_TYPE.SPRINT&&S.game.cameraCtrl.setOriginPosX(this.node.position.x),this.touchPosX=this.movePosX}this.setTrailPos()}}},{key:"onTouchStart",value:function(t,i){this.isTouch=!0,this.touchPosX=t.getLocation().x,this.movePosX=this.touchPosX}},{key:"onTouchMove",value:function(t,i){this.movePosX=t.getLocation().x}},{key:"onTouchEnd",value:function(t,i){this.isTouch=!1}},{key:"reset",value:function(){this.boardCount=0,this.diffLevel=1,I.set(S.BOARD_INIT_POS),I.y+=S.BALL_RADIUS+S.BOARD_HEIGTH/2-.001,this.node.setPosition(I),this.node.eulerAngles=new P,this.currJumpFrame=0,this.jumpState=S.BALL_JUMP_STATE.FALLDOWN,this.hasSprint=!1,this.currBoardIdx=0,this.show(),this.playTrail(),this.setTrailPos()}},{key:"updateBall",value:function(){this.trailNode=L.instance.getNode(this.trail02Prefab,this.node.parent)}},{key:"show",value:function(){this.node.active=!0}},{key:"hide",value:function(){this.node.active=!1}},{key:"activeCurrBoard",value:function(){var t=this.node.position,i=this.currBoard.node.position,e=this.currBoard.type,o=i.y+S.BALL_RADIUS+this.currBoard.getHeight()/2-.01;if(this.node.setPosition(t.x,o,t.z),this.currJumpFrame=0,e===S.BOARD_TYPE.SPRINT?(this.jumpState=S.BALL_JUMP_STATE.SPRINT,S.game.cameraCtrl.setOriginPosX(i.x)):this.jumpState=S.BALL_JUMP_STATE.JUMPUP,!this.currBoard.isActive){this.currBoard.isActive=!0;var r=S.SCORE_BOARD_NOT_CENTER;(e!==S.BOARD_TYPE.NORMAL&&e!==S.BOARD_TYPE.DROP||Math.abs(t.x-i.x)<=S.BOARD_RADIUS_CENTER)&&(r=S.SCORE_BOARD_CENTER),S.game.addScore(r),this.showScore(r),this.boardCount++,5===this.boardCount&&S.game.node.emit(S.GAME_EVENT.HIDETIPS),this.diffLevel+=r/2;for(var s=this.currBoardIdx-S.BOARD_NEW_INDEX;s>0;s--)this.newBoard()}this.isJumpSpring=e===S.BOARD_TYPE.SPRING,this.currBoard.setBump(),this.currBoard.setWave(),e!=S.BOARD_TYPE.SPRING&&e!=S.BOARD_TYPE.SPRINT||this.currBoard.setSpring();var a=S.game.boardManager.getBoardList();if(e===S.BOARD_TYPE.DROP)for(var n=0;n<this.currBoardIdx;n++)a[n].setDrop();var h=i.y+S.CAMERA_OFFSET_Y;S.game.cameraCtrl.setOriginPosY(h),S.game.cameraCtrl.preType=e}},{key:"newBoard",value:function(){var t=S.BOARD_TYPE.NORMAL;if(this.boardGroupCount<=0){var i=B.getDiffCoeff(this.diffLevel,1,10),e=Math.random()*i;e<4.2?(t=S.BOARD_TYPE.NORMAL,this.boardGroupCount=2):e<=5.5?(t=S.BOARD_TYPE.GIANT,this.boardGroupCount=3):e<=6.2?(t=S.BOARD_TYPE.SPRING,Math.random()>.5&&(this.boardGroupCount=2)):e<=7?(t=S.BOARD_TYPE.DROP,this.boardGroupCount=3):e<=7.5&&!1===this.hasSprint?(t=S.BOARD_TYPE.SPRINT,this.hasSprint=!0):t=S.BOARD_TYPE.NORMAL}this.boardGroupCount--,S.game.boardManager.newBoard(t,this.diffLevel)}},{key:"showScore",value:function(t){var i=L.instance.getNode(this.scoreAniPrefab,cc.find("Canvas/resultUI")),e=new P,o=S.game.cameraCtrl.node.getComponent(l);this._wpos.set(this.node.worldPosition),o.convertToUINode(this._wpos,cc.find("Canvas/resultUI"),e),e.x+=50,i.setPosition(e),i.getComponentInChildren(A).string="+".concat(t);var r=i.getComponent(m);r.once("finished",(function(){L.instance.putNode(i)})),r.play()}},{key:"setPosX",value:function(){if(this.isTouch&&this.touchPosX!==this.movePosX)if(I.set(this.node.position),this.jumpState===S.BALL_JUMP_STATE.SPRINT){var t=(this.movePosX-this.touchPosX)*S.COEFF_POS_BALL;this.node.setPosition(I.x+t,I.y,I.z),I.set(this.node.position),t=I.x;var i=1.3*S.SCENE_MAX_OFFSET_X,e=this.currBoard.node.position;t>e.x+i?this.node.setPosition(e.x+i,I.y,I.z):t<this.currBoard.node.position.x-i&&this.node.setPosition(e.x-i,I.y,I.z)}else{var o=(this.movePosX-this.touchPosX)*S.COEFF_POS_BALL;this.node.setPosition(I.x+o,I.y,I.z)}}},{key:"setPosY",value:function(){I.set(this.node.position),this.jumpState===S.BALL_JUMP_STATE.JUMPUP?(this.isJumpSpring?I.y+=S.BALL_JUMP_STEP_SPRING[Math.floor(this.currJumpFrame/3)]:I.y+=S.BALL_JUMP_STEP[Math.floor(this.currJumpFrame/2)],this.node.setPosition(I)):this.jumpState===S.BALL_JUMP_STATE.FALLDOWN?(this.currBoard.type===S.BOARD_TYPE.SPRING?this.currJumpFrame<S.BALL_JUMP_FRAMES_SPRING?I.y-=S.BALL_JUMP_STEP_SPRING[Math.floor((S.BALL_JUMP_FRAMES_SPRING-this.currJumpFrame-1)/3)]:I.y-=S.BALL_JUMP_STEP_SPRING[0]:this.currJumpFrame<S.BALL_JUMP_FRAMES?I.y-=S.BALL_JUMP_STEP[Math.floor((S.BALL_JUMP_FRAMES-this.currJumpFrame-1)/2)]:I.y-=S.BALL_JUMP_STEP[0],this.node.setPosition(I)):this.jumpState===S.BALL_JUMP_STATE.SPRINT&&(I.y+=S.BALL_JUMP_STEP_SPRINT,this.node.setPosition(I),this.currJumpFrame>=S.DIAMOND_START_FRAME+20&&this.currJumpFrame<=S.BALL_JUMP_FRAMES_SPRINT-50&&this.currJumpFrame%Math.floor(S.DIAMOND_SPRINT_STEP_Y/S.BALL_JUMP_STEP_SPRINT)==0&&S.game.boardManager.newDiamond())}},{key:"isOnBoard",value:function(t){var i=this.node.position,e=t.node.position,o=Math.abs(i.x-e.x),r=i.y-e.y;if(o<=t.getRadius()){if(r>=0&&r<=S.BALL_RADIUS+t.getHeight()/2)return!0;if(this.isJumpSpring&&this.currJumpFrame>=S.BALL_JUMP_FRAMES_SPRING){if(Math.abs(r)<S.BALL_JUMP_STEP_SPRING[0])return!0}else if(!this.isJumpSpring&&this.currJumpFrame>=S.BALL_JUMP_FRAMES&&Math.abs(r)<S.BALL_JUMP_STEP[0])return!0}return!1}},{key:"revive",value:function(){this.currBoardIdx--,this.currBoard.type===S.BOARD_TYPE.SPRINT&&(this.currBoardIdx++,this.currBoard=S.game.boardManager.getBoardList()[this.currBoardIdx]),this.currBoard.revive();var t=this.currBoard.node.position.clone();t.y+=S.BALL_RADIUS+this.currBoard.getHeight()/2-.001,this.node.setPosition(t),this.node.eulerAngles=new cc.Vec3(0,0,0),this.currJumpFrame=0,this.show();var i=this.currBoard.node.position.y+S.CAMERA_OFFSET_Y;S.game.cameraCtrl.setOriginPosX(t.x),S.game.cameraCtrl.setOriginPosY(i),this.playTrail(),this.setTrailPos()}},{key:"playDiamondParticle",value:function(t){var i=this,e=L.instance.getNode(this.diamondParticlePrefab,this.node.parent);e.setPosition(t);var o=e.getComponent(p);o.play();this.schedule((function t(){o.isPlaying||(L.instance.putNode(e),i.unschedule(t))}),.1)}},{key:"playTrail",value:function(){this.trailNode.active=!0,this.trailNode.getComponentInChildren(p).play()}},{key:"setTrailPos",value:function(){var t=this.node.position;this.trailNode.setPosition(t.x,t.y-.1,t.z)}}]),i}(T)).prototype,"diamondParticlePrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(g.prototype,"scoreAniPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(g.prototype,"trail02Prefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g))||v));u._RF.pop()}}}));

System.register("chunks:///game/board.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../data/constants.js","../utils/utils.js"],(function(i){"use strict";var e,t,s,n,a,r,o,h,p,c,l,v,u,d,g,R,_,P;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inherits,s=i.classCallCheck,n=i.possibleConstructorReturn,a=i.getPrototypeOf,r=i.initializerDefineProperty,o=i.assertThisInitialized,h=i.createClass},function(i){p=i.cclegacy,c=i._decorator,l=i.Vec3,v=i.Prefab,u=i.instantiate,d=i.ModelComponent,g=i.Color,R=i.Component},function(i){_=i.Constants},function(i){P=i.utils}],execute:function(){var f,S,D,A,m,T,E,O,y,B,I,H,F;p._RF.push({},"bb50aLcTl1FbpB7Hy0H/DT9","board",void 0);var M=c.ccclass,w=c.property,N=new l;i("Board",(f=M("Board"),S=w(v),D=w({type:v}),A=w({type:v}),m=w({type:v}),T=w({type:v}),f((y=e((O=function(i){function e(){var i,t;s(this,e);for(var h=arguments.length,p=new Array(h),c=0;c<h;c++)p[c]=arguments[c];return t=n(this,(i=a(e)).call.apply(i,[this].concat(p))),r(t,"diamondPrefab",y,o(t)),r(t,"centerPrefab",B,o(t)),r(t,"wavePrefab",I,o(t)),r(t,"springTopPrefab",H,o(t)),r(t,"springHelixPrefab",F,o(t)),t.isActive=!1,t.diamondList=[],t.type=_.BOARD_TYPE.NORMAL,t.wave=null,t.waveInner=null,t.waveOriginScale=new l,t.currWaveFrame=0,t.currSpringFrame=0,t.currBumpFrame=_.BOARD_BUMP_FRAMES,t.springTop=null,t.springHelix=null,t.springHelixOriginScale=new l,t.center=null,t.isMovingRight=!0,t.hasDiamond=!1,t.isMoving=!1,t.posBeforeDrop=new l,t.originScale=new l,t.currDropFrame=_.BOARD_DROP_FRAMES,t._game=null,t}return t(e,i),h(e,[{key:"onLoad",value:function(){this.originScale.set(this.node.scale),this.initCenter(),this.initWave(),this.initSpring(),this.initDiamond()}},{key:"update",value:function(){this.effectBump(),this.effectWave(),this.type!==_.BOARD_TYPE.SPRING&&this.type!==_.BOARD_TYPE.SPRINT||this.effectSpring(),this.effectDrop(),this.effectMove(),this.hasDiamond&&this.effectDiamondRotate()}},{key:"reset",value:function(i,e,t){if(this.isActive=!1,this.type=i,this.node.setPosition(e),this.isMoving=!1,this.type!==_.BOARD_TYPE.NORMAL&&this.type!==_.BOARD_TYPE.DROP&&this.type!==_.BOARD_TYPE.SPRING||(this.isMoving=this.setMove(t)),this.type===_.BOARD_TYPE.GIANT?this.node.setScale(this.originScale.x*_.BOARD_SCALE_GIANT,this.originScale.y,this.originScale.z):this.type===_.BOARD_TYPE.DROP?(this.node.setScale(this.originScale.x,this.originScale.y*_.BOARD_HEIGTH_SCALE_DROP,this.originScale.z),this.posBeforeDrop.set(this.node.position)):this.node.setScale(this.originScale),this.springTop.active=!1,this.type===_.BOARD_TYPE.SPRING&&(this.springHelix.active=!0,this.springTop.active=!0,this.setSpringPos()),this.type===_.BOARD_TYPE.SPRINT&&(this.springHelix.active=!0,this.springTop.active=!0,this.setSpringPos()),this.hasDiamond=!1,this.diamondList[0]){for(var s=0;s<5;s++)this.diamondList[s].active=!1;if(this.type===_.BOARD_TYPE.GIANT)for(var n=0;n<5;n++)this.diamondList[n].active=!0,this.hasDiamond=!0;else this.type!==_.BOARD_TYPE.NORMAL&&this.type!==_.BOARD_TYPE.DROP||Math.random()>.7&&(this.diamondList[2].active=!0,this.hasDiamond=!0);this.hasDiamond&&this.setDiamondPos()}}},{key:"setDrop",value:function(){this.currDropFrame=0,this.posBeforeDrop.set(this.node.position)}},{key:"effectDrop",value:function(){if(this.currDropFrame<_.BOARD_DROP_FRAMES){for(var i=0;i<5;i++)this.diamondList[i].active=!1;if(this.springTop.active){this.springHelix.active=!1;var e=this.springTop.position;this.springTop.setPosition(e.x,e.y-_.BOARD_DROP_STEP,e.z)}N.set(this.node.position),N.y-=_.BOARD_DROP_STEP,this.node.setPosition(N),this.setCenterPos(),this.currDropFrame++}}},{key:"initDiamond",value:function(){for(var i=0;i<5;i++)this.diamondList[i]=u(this.diamondPrefab),this.node.parent.addChild(this.diamondList[i]),this.diamondList[i].active=!1}},{key:"setDiamondPos",value:function(){for(var i=new l,e=0;e<5;e++)this.diamondList[e].active&&(i.set(this.node.position),i.x+=1.4*(e-2),i.y+=_.BOARD_HEIGTH,this.diamondList[e].setPosition(i))}},{key:"hideDiamond",value:function(i){this.diamondList[i].active=!1}},{key:"checkDiamond",value:function(i){if(this.hasDiamond){for(var e=!0,t=0;t<5;t++)this.diamondList[t].active&&(e=!1,Math.abs(i-this.diamondList[t].position.x)<=_.DIAMOND_SCORE_AREA&&(_.game.ball.playDiamondParticle(this.diamondList[t].position),this.hideDiamond(t),_.game.addScore(_.DIAMOND_SCORE)));e&&(this.hasDiamond=!1)}}},{key:"effectDiamondRotate",value:function(){for(var i=0;i<5;i++){var e=this.diamondList[i].eulerAngles;this.diamondList[i].eulerAngles=new l(e.x,e.y+_.DIAMOND_ROTATE_STEP_Y,e.z)}}},{key:"initSpring",value:function(){this.springHelix=u(this.springHelixPrefab),this.springHelixOriginScale=this.springHelix.getScale(),this.springHelix.setScale(1.5,1,1.5),this.node.parent.addChild(this.springHelix),this.springHelix.active=!1,this.currSpringFrame=2*_.BOARD_SPRING_FRAMES,this.springTop=u(this.springTopPrefab),this.node.parent.addChild(this.springTop),this.springTop.active=!1;var i=this.node.position.clone();i.y+=(_.BOARD_HEIGTH+_.SPRING_HEIGHT)/2,this.springTop.setPosition(i),this.setSpringPos()}},{key:"setSpring",value:function(){this.currSpringFrame=0,this.setSpringPos(),this.springHelix.setScale(1.5,1,1.5),this.springHelix.active=!0,this.springTop.active=!0}},{key:"setSpringPos",value:function(){var i=this.node.position.clone();i.y+=_.BOARD_HEIGTH/2,this.springHelix.setPosition(i),(i=this.node.position.clone()).y+=(_.BOARD_HEIGTH+_.SPRING_HEIGHT)/2,this.springTop.setPosition(i)}},{key:"effectSpring",value:function(){var i=this.type===_.BOARD_TYPE.SPRINT?_.SPRING_HELIX_STEP_SPIRNT:_.SPRING_HELIX_STEP,e=this.type===_.BOARD_TYPE.SPRINT?_.SPRING_TOP_STEP_SPRINT:_.SPRING_TOP_STEP,t=this.springHelix.scale,s=this.springTop.position;this.currSpringFrame<_.BOARD_SPRING_FRAMES?(this.springHelix.setScale(t.x,t.y+i,t.z),this.springTop.setPosition(s.x,s.y+e,s.z),this.currSpringFrame++):this.currSpringFrame>=_.BOARD_SPRING_FRAMES&&this.currSpringFrame<2*_.BOARD_SPRING_FRAMES?(this.springHelix.setScale(t.x,t.y-i,t.z),this.springTop.setPosition(s.x,s.y-e,s.z),this.currSpringFrame++):this.springHelix.active=!1}},{key:"setBump",value:function(){this.currBumpFrame=0}},{key:"effectBump",value:function(){if(this.currBumpFrame<_.BOARD_BUMP_FRAMES){var i=this.node.position;this.node.setPosition(i.x,i.y+_.BOARD_BUMP_STEP[this.currBumpFrame],i.z),this.setCenterPos(),this.currBumpFrame++}}},{key:"initCenter",value:function(){this.center=u(this.centerPrefab),this.node.parent.addChild(this.center),this.center.active=!1}},{key:"setCenterPos",value:function(){var i=this.node.position.clone();i.y+=_.BOARD_HEIGTH/2,this.center.setPosition(i)}},{key:"initWave",value:function(){this.wave=u(this.wavePrefab),this.node.parent.addChild(this.wave),this.wave.active=!1,this.waveInner=u(this.wavePrefab),this.node.parent.addChild(this.waveInner),this.waveInner.active=!1,this.currWaveFrame=_.BOARD_WAVE_FRAMES,this.waveOriginScale.set(this.wave.scale)}},{key:"setWave",value:function(){if(this.type!=_.BOARD_TYPE.GIANT){this.currWaveFrame=0;var i=this.node.position.clone();i.y+=_.WAVE_OFFSET_Y,this.wave.setPosition(i),this.wave.setScale(this.waveOriginScale.clone()),this.wave.active=!0;var e=this.wave.getComponent(d).material.passes[0],t=e.getHandle("color"),s=cc.color("#dadada");s.a=127,e.setUniform(t,s),this.waveInner.setPosition(i),this.waveInner.setScale(this.waveOriginScale.clone())}}},{key:"effectWave",value:function(){if(this.currWaveFrame<_.BOARD_WAVE_FRAMES){if(this.currWaveFrame>=_.BOARD_WAVE_INNER_START_FRAMES){this.waveInner.active||(this.waveInner.active=!0);var i=this.waveInner.getComponent(d).material.passes[0],e=i.getHandle("color"),t=new g("#dadada");t.a=127-127*Math.sin(.05*this.currWaveFrame),i.setUniform(e,t);var s=this.waveInner.getScale();this.waveInner.setScale(s.x+_.BOARD_WAVE_INNER_STEP,s.y,s.z+_.BOARD_WAVE_INNER_STEP)}var n=this.wave.getComponent(d).material.passes[0],a=n.getHandle("color"),r=new g("#dadada");r.a=127-127*Math.sin(.1*this.currWaveFrame),n.setUniform(a,r);var o=this.waveInner.getScale();this.wave.setScale(o.x+_.BOARD_WAVE_STEP,o.y,o.z+_.BOARD_WAVE_STEP),this.currWaveFrame++}else this.wave.active=!1,this.waveInner.active=!1}},{key:"getHeight",value:function(){return this.type===_.BOARD_TYPE.DROP?_.BOARD_HEIGTH*_.BOARD_HEIGTH_SCALE_DROP:_.BOARD_HEIGTH}},{key:"getRadius",value:function(){return this.type===_.BOARD_TYPE.GIANT?_.BOARD_RADIUS*_.BOARD_RADIUS_SCALE_GIANT:_.BOARD_RADIUS}},{key:"setMove",value:function(i){var e=P.getDiffCoeff(i,1,10);return Math.random()*e>5}},{key:"effectMove",value:function(){if(this.isMoving){var i=this.node.getPosition().clone(),e=i.x;this.isMovingRight&&e<=_.SCENE_MAX_OFFSET_X?(e+=_.BOARD_MOVING_STEP,this.node.setPosition(e,i.y,i.z)):this.isMovingRight&&e>_.SCENE_MAX_OFFSET_X?this.isMovingRight=!1:!this.isMovingRight&&e>=-_.SCENE_MAX_OFFSET_X?(e-=_.BOARD_MOVING_STEP,this.node.setPosition(e,i.y,i.z)):!this.isMovingRight&&e<-_.SCENE_MAX_OFFSET_X&&(this.isMovingRight=!0),this.type===_.BOARD_TYPE.SPRING&&(this.springHelix.setPosition(this.node.position.x,this.springHelix.position.y,this.springHelix.position.z),this.springTop.setPosition(this.node.position.x,this.springTop.position.y,this.springTop.position.z)),this.setCenterPos(),this.hasDiamond&&this.setDiamondPos()}}},{key:"revive",value:function(){this.isActive=!1,this.isMoving=!1,this.type===_.BOARD_TYPE.DROP&&(this.currDropFrame=_.BOARD_DROP_FRAMES,this.node.setPosition(this.posBeforeDrop))}}]),e}(R)).prototype,"diamondPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(O.prototype,"centerPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(O.prototype,"wavePrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(O.prototype,"springTopPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(O.prototype,"springHelixPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=O))||E));p._RF.pop()}}}));

System.register("chunks:///game/camera-ctrl.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../data/constants.js"],(function(i){"use strict";var t,s,e,o,n,r,a,l,_,c,h,u,P,y;return{setters:[function(i){t=i.applyDecoratedDescriptor,s=i.inherits,e=i.classCallCheck,o=i.possibleConstructorReturn,n=i.getPrototypeOf,r=i.initializerDefineProperty,a=i.assertThisInitialized,l=i.createClass},function(i){_=i.cclegacy,c=i._decorator,h=i.Vec3,u=i.Node,P=i.Component},function(i){y=i.Constants}],execute:function(){var p,g,A,R,M;_._RF.push({},"b5204GgQaBDNqMtOdI4KDJl","camera-ctrl",void 0);var f=c.ccclass,E=c.property,C=new h;i("CameraCtrl",(p=f("CameraCtrl"),g=E(u),p((M=t((R=function(i){function t(){var i,s;e(this,t);for(var l=arguments.length,_=new Array(l),c=0;c<l;c++)_[c]=arguments[c];return s=o(this,(i=n(t)).call.apply(i,[this].concat(_))),r(s,"planeNode",M,a(s)),s.preType=y.BOARD_TYPE.NORMAL,s._originPos=new h,s}return s(t,i),l(t,[{key:"start",value:function(){this._originPos.set(y.CAMERA_INIT_POS),this.setPosition(this._originPos),this.node.eulerAngles=y.CAMERA_INIT_ROT}},{key:"setOriginPosX",value:function(i){this._originPos.x=i}},{key:"setOriginPosY",value:function(i){this._originPos.y=i}},{key:"update",value:function(){if(C.set(this.node.position),C.x!==this._originPos.x||C.y!==this._originPos.y){if(Math.abs(C.x-this._originPos.x)<=y.CAMERA_MOVE_MINI_ERR)C.x=this._originPos.x,this.setPosition(C);else{var i=this._originPos.x-C.x;C.x+=i/y.CAMERA_MOVE_X_FRAMES,this.setPosition(C)}if(C.set(this.node.position),Math.abs(C.y-this._originPos.y)<=y.CAMERA_MOVE_MINI_ERR)C.y=this._originPos.y,this.setPosition(C);else{var t=this._originPos.y-C.y;this.preType===y.BOARD_TYPE.SPRING?(C.y+=t/y.CAMERA_MOVE_Y_FRAMES_SPRING,this.setPosition(C)):(C.y+=t/y.CAMERA_MOVE_Y_FRAMES,this.setPosition(C))}}}},{key:"reset",value:function(){this._originPos.set(y.CAMERA_INIT_POS),this.setPosition(this._originPos)}},{key:"setPosition",value:function(i){this.node.setPosition(i);var t=i.y-27;this.planeNode.setPosition(i.x,t,-100)}}]),t}(P)).prototype,"planeNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=R))||A));_._RF.pop()}}}));

System.register("chunks:///game/ui-manager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../data/constants.js"],(function(e){"use strict";var t,a,r,n,i,o,s,u,c,l,p,g,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inherits,r=e.classCallCheck,n=e.possibleConstructorReturn,i=e.getPrototypeOf,o=e.initializerDefineProperty,s=e.assertThisInitialized,u=e.createClass},function(e){c=e.cclegacy,l=e._decorator,p=e.Node,g=e.Component},function(e){f=e.Constants}],execute:function(){var h,v,y,b,m,d,C;c._RF.push({},"4becfUEfe1C2prK7h8zxNvz","ui-manager",void 0);var R=l.ccclass,z=l.property;e("UIManager",(h=R("UIManager"),v=z(p),y=z(p),h((d=t((m=function(e){function t(){var e,a;r(this,t);for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];return a=n(this,(e=i(t)).call.apply(e,[this].concat(c))),o(a,"pageStart",d,s(a)),o(a,"pageResult",C,s(a)),a}return a(t,e),u(t,[{key:"onLoad",value:function(){f.game.uiManager=this}},{key:"start",value:function(){this.pageResult.active=!1}},{key:"showDialog",value:function(e){this.pageResult.active=!e,this.pageStart.active=e}}]),t}(g)).prototype,"pageStart",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(m.prototype,"pageResult",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b));c._RF.pop()}}}));

System.register("chunks:///game/game.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./audio-manager.js","../data/constants.js","./board-manager.js","./ball.js","./camera-ctrl.js","./ui-manager.js"],(function(e){"use strict";var t,a,i,n,r,o,s,l,u,c,h,f,g,E,v,b,d,m,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inherits,i=e.classCallCheck,n=e.possibleConstructorReturn,r=e.getPrototypeOf,o=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,c=e._decorator,h=e.Prefab,f=e.instantiate,g=e.Component},function(e){E=e.AudioManager},function(e){v=e.Constants},function(e){b=e.BoardManager},function(e){d=e.Ball},function(e){m=e.CameraCtrl},function(e){p=e.UIManager}],execute:function(){var A,y,M,T,_,R,G,S,C,k,D,P,V;u._RF.push({},"6b6999+5cFK4K47RCoawnB4","game",void 0);var w=c.ccclass,N=c.property;e("Game",(A=w("Game"),y=N(h),M=N(b),T=N(m),_=N(p),R=N(E),A((C=t((S=function(e){function t(){var e,a;i(this,t);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a=n(this,(e=r(t)).call.apply(e,[this].concat(u))),o(a,"ballPref",C,s(a)),o(a,"boardManager",k,s(a)),o(a,"cameraCtrl",D,s(a)),o(a,"uiManager",P,s(a)),o(a,"audioManager",V,s(a)),a.state=v.GAME_STATE.READY,a.score=0,a.hasRevive=!1,a._ball=null,a}return a(t,e),l(t,[{key:"__preload",value:function(){v.game=this}},{key:"onLoad",value:function(){if(!this.ballPref)return console.log("There is no ball!!"),void(this.enabled=!1);var e=f(this.ballPref);e.parent=this.node.parent,this._ball=e.getComponent(d)}},{key:"start",value:function(){this.node.on(v.GAME_EVENT.RESTART,this.gameStart,this),this.node.on(v.GAME_EVENT.REVIVE,this.gameRevive,this)}},{key:"onDestroy",value:function(){this.node.off(v.GAME_EVENT.RESTART,this.gameStart,this),this.node.off(v.GAME_EVENT.REVIVE,this.gameRevive,this)}},{key:"resetGame",value:function(){this.state=v.GAME_STATE.READY,this._ball.reset(),this.cameraCtrl.reset(),this.boardManager.reset(),this.uiManager.showDialog(!0)}},{key:"gameStart",value:function(){this.audioManager.playSound(),this.uiManager.showDialog(!1),this.state=v.GAME_STATE.PLAYING,this.hasRevive=!1,this.score=0}},{key:"gameDie",value:function(){var e=this;this.audioManager.playSound(!1),this.state=v.GAME_STATE.PAUSE,this.hasRevive?this.gameOver():this.node.emit(v.GAME_EVENT.DYING,(function(){e.gameOver()}))}},{key:"gameOver",value:function(){this.state=v.GAME_STATE.OVER,this.audioManager.playSound(!1),this.resetGame()}},{key:"gameRevive",value:function(){var e=this;this.hasRevive=!0,this.state=v.GAME_STATE.READY,this.ball.revive(),this.scheduleOnce((function(){e.audioManager.playSound(),e.state=v.GAME_STATE.PLAYING}),1)}},{key:"addScore",value:function(e){this.score+=e,this.node.emit(v.GAME_EVENT.ADDSCORE,this.score)}},{key:"ball",get:function(){return this._ball}}]),t}(g)).prototype,"ballPref",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(S.prototype,"boardManager",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(S.prototype,"cameraCtrl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(S.prototype,"uiManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(S.prototype,"audioManager",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=S))||G));u._RF.pop()}}}));

System.register("chunks:///game/update-value-label.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t){"use strict";var i,a,e,s,n,r,l,c;return{setters:[function(t){i=t.inherits,a=t.classCallCheck,e=t.possibleConstructorReturn,s=t.getPrototypeOf,n=t.createClass},function(t){r=t.cclegacy,l=t._decorator,c=t.LabelComponent}],execute:function(){var h;r._RF.push({},"02566VN0PhN8o7NqZg0WyFs","update-value-label",void 0);var u=l.ccclass;l.property,t("UpdateValueLabel",u("UpdateValueLabel")(h=function(t){function r(){var t,i;a(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(i=e(this,(t=s(r)).call.apply(t,[this].concat(l)))).isPlaying=!1,i.startVal=0,i.endVal=0,i.diffVal=0,i.currTime=0,i.changingTime=0,i}return i(r,t),n(r,[{key:"start",value:function(){}},{key:"playUpdateValue",value:function(t,i,a){this.startVal=t,this.endVal=i,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=a,this.string=t.toString(),this.isPlaying=!0}},{key:"update",value:function(t){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=t;var i=this.startVal+parseInt((this.currTime/this.changingTime*this.diffVal).toString());return i<this.startVal?i=this.startVal:i>this.endVal&&(i=this.endVal),void(this.string="".concat(i))}this.string="".concat(this.endVal),this.isPlaying=!1}}}]),r}(c))||h);r._RF.pop()}}}));

System.register("chunks:///game/revive.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../data/constants.js"],(function(e){"use strict";var t,n,i,r,o,s,a,l,u,c,p,g,h,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,i=e.classCallCheck,r=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,c=e._decorator,p=e.WidgetComponent,g=e.LabelComponent,h=e.SpriteComponent,b=e.Component},function(e){f=e.Constants}],execute:function(){var C,v,w,m,y,D,R,L,k,d,E,M,S;u._RF.push({},"37e87RwLXtA5LwGn6Zuq48u","revive",void 0);var T=c.ccclass,_=c.property;e("Revive",(C=T("Revive"),v=_(p),w=_(g),m=_({type:g}),y=_({type:g}),D=_(h),C((k=t((L=function(e){function t(){var e,n;i(this,t);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return(n=r(this,(e=o(t)).call.apply(e,[this].concat(u)))).closeCb=null,s(n,"wgMenu",k,a(n)),s(n,"historyLabel",d,a(n)),s(n,"scoreLabel",E,a(n)),s(n,"progressLabel",M,a(n)),s(n,"spCountDown",S,a(n)),n.pageResult=null,n}return n(t,e),l(t,[{key:"onEnable",value:function(){this.show()}},{key:"show",value:function(){var e=f.game.score;this.scoreLabel.string=e.toString(),f.MAX_SCORE<e&&(f.MAX_SCORE=e),this.historyLabel.string=f.MAX_SCORE.toString(),this.countDownTime=5,this.progressLabel.string=this.countDownTime+"",this.currentTime=0,this.spCountDown.fillRange=1,this.isCountDowning=!0}},{key:"onBtnReviveClick",value:function(){this.isCountDowning=!1,f.game.audioManager.playClip(),f.game.node.emit(f.GAME_EVENT.REVIVE),this.pageResult.showResult(!1)}},{key:"onBtnSkipClick",value:function(){f.game.audioManager.playClip(),this.isCountDowning=!1,f.game.gameOver()}},{key:"update",value:function(e){if(this.isCountDowning){this.currentTime+=e;var t=this.countDownTime-this.currentTime;this.progressLabel.string=Math.ceil(t)+"",t<=0&&(t=0,this.isCountDowning=!1,this.onBtnSkipClick());var n=t/this.countDownTime;this.spCountDown.fillRange=n}}}]),t}(b)).prototype,"wgMenu",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(L.prototype,"historyLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(L.prototype,"scoreLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"progressLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(L.prototype,"spCountDown",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=L))||R));u._RF.pop()}}}));

System.register("chunks:///game/page-result.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../data/constants.js","./update-value-label.js","./revive.js"],(function(e){"use strict";var t,i,s,n,r,a,o,l,u,c,h,p,g,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,s=e.classCallCheck,n=e.possibleConstructorReturn,r=e.getPrototypeOf,a=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,c=e._decorator,h=e.Node,p=e.Component},function(e){g=e.Constants},function(e){f=e.UpdateValueLabel},function(e){d=e.Revive}],execute:function(){var b,y,v,T,E,m,P,D,R,w,k;u._RF.push({},"31b007MqixM3YyJROFsTMEh","page-result",void 0);var _=c.ccclass,C=c.property;e("PageResult",(b=_("PageResult"),y=C({type:f}),v=C(h),T=C(h),E=C(h),b((D=t((P=function(e){function t(){var e,i;s(this,t);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return i=n(this,(e=r(t)).call.apply(e,[this].concat(u))),a(i,"scoreLabel",D,o(i)),i.targetProgress=0,a(i,"nodeTips1",R,o(i)),a(i,"nodeTips2",w,o(i)),a(i,"result",k,o(i)),i}return i(t,e),l(t,[{key:"init",value:function(){this.targetProgress=0,this.scoreLabel.playUpdateValue(this.targetProgress,this.targetProgress,0),this.scoreLabel.isPlaying=!1}},{key:"onEnable",value:function(){g.game.node.on(g.GAME_EVENT.HIDETIPS,this.hideTips,this),g.game.node.on(g.GAME_EVENT.ADDSCORE,this.addScore,this),g.game.node.on(g.GAME_EVENT.DYING,this.gameDie,this),this.showTips(!0),this.showResult(!1),this.init()}},{key:"start",value:function(){this.result.getComponent(d).pageResult=this}},{key:"onDisable",value:function(){g.game.node.off(g.GAME_EVENT.HIDETIPS,this.hideTips,this),g.game.node.off(g.GAME_EVENT.ADDSCORE,this.addScore,this)}},{key:"addScore",value:function(e){this.targetProgress=e;var t=Number(this.scoreLabel.string);this.scoreLabel.playUpdateValue(t,this.targetProgress,(this.targetProgress-t)/20)}},{key:"gameDie",value:function(e){this.showTips(!1),this.showResult(!0)}},{key:"showTips",value:function(e){this.nodeTips1.active=e,this.nodeTips2.active=e}},{key:"hideTips",value:function(){this.showTips(!1)}},{key:"showResult",value:function(e){this.result.active=e}}]),t}(p)).prototype,"scoreLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(P.prototype,"nodeTips1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(P.prototype,"nodeTips2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(P.prototype,"result",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P))||m));u._RF.pop()}}}));

System.register("chunks:///game/page-start.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../data/constants.js"],(function(t){"use strict";var e,a,n,r,s,c,o,u,i;return{setters:[function(t){e=t.inherits,a=t.createClass,n=t.classCallCheck,r=t.possibleConstructorReturn,s=t.getPrototypeOf},function(t){c=t.cclegacy,o=t._decorator,u=t.Component},function(t){i=t.Constants}],execute:function(){var l;c._RF.push({},"75579oVThhNcJN3jNLu42YC","page-start",void 0);var p=o.ccclass;o.property,t("PageStart",p("PageStart")(l=function(t){function c(){return n(this,c),r(this,s(c).apply(this,arguments))}return e(c,t),a(c,[{key:"gameStart",value:function(){i.game.node.emit(i.GAME_EVENT.RESTART),i.game.audioManager.playClip()}}]),c}(u))||l);c._RF.pop()}}}));

System.register("chunks:///_virtual/_rollupPluginBabelHelpers.js",[],(function(e){"use strict";return{execute:function(){function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(t){return(r=e("getPrototypeOf",Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)}))(t)}function i(t,r){return(i=e("setPrototypeOf",Object.setPrototypeOf||function(e,t){return e.__proto__=t,e}))(t,r)}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e({applyDecoratedDescriptor:function(e,t,r,i,n){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0);o=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0);void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null);return o},assertThisInitialized:n,classCallCheck:function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass:function(e,r,i){r&&t(e.prototype,r);i&&t(e,i);return e},getPrototypeOf:r,inherits:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)},initializerDefineProperty:function(e,t,r,i){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})},possibleConstructorReturn:function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;return n(e)},setPrototypeOf:i})}}}));

(function () {
    var aliasChunk = function(chunkId, moduleId) {
        System.register(moduleId, [chunkId], function (_export, _context) {
            var _m;
            return {
                setters: [function(m) {
                    _m = m;
                }],
                execute: function () {
                    _export(_m);
                }
            };
        });
    };
	aliasChunk('chunks:///game/audio-manager.js', 'project:///assets/script/game/audio-manager.js');
	aliasChunk('chunks:///data/constants.js', 'project:///assets/script/data/constants.js');
	aliasChunk('chunks:///utils/utils.js', 'project:///assets/script/utils/utils.js');
	aliasChunk('chunks:///game/board-manager.js', 'project:///assets/script/game/board-manager.js');
	aliasChunk('chunks:///utils/pool-manager.js', 'project:///assets/script/utils/pool-manager.js');
	aliasChunk('chunks:///game/ball.js', 'project:///assets/script/game/ball.js');
	aliasChunk('chunks:///game/board.js', 'project:///assets/script/game/board.js');
	aliasChunk('chunks:///game/camera-ctrl.js', 'project:///assets/script/game/camera-ctrl.js');
	aliasChunk('chunks:///game/ui-manager.js', 'project:///assets/script/game/ui-manager.js');
	aliasChunk('chunks:///game/game.js', 'project:///assets/script/game/game.js');
	aliasChunk('chunks:///game/update-value-label.js', 'project:///assets/script/game/update-value-label.js');
	aliasChunk('chunks:///game/revive.js', 'project:///assets/script/game/revive.js');
	aliasChunk('chunks:///game/page-result.js', 'project:///assets/script/game/page-result.js');
	aliasChunk('chunks:///game/page-start.js', 'project:///assets/script/game/page-start.js');
})();
